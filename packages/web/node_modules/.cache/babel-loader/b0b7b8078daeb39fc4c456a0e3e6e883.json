{"ast":null,"code":"var Class = require('../../core/class');\n\nvar Base = require('./base');\n\nvar Path = require('./path');\n\nvar Surface = require('./surface');\n\nvar Group = require('./group');\n\nvar DOM = require('./dom');\n\nvar fontAnchors = {\n  start: 'left',\n  middle: 'center',\n  end: 'right'\n};\nmodule.exports = Class(Base, {\n  base_initialize: Base.prototype.initialize,\n  initialize: function (text, font, alignment, path) {\n    this.base_initialize('shape');\n    var p = this.pathElement = DOM.createElement('path');\n    p.textpathok = true;\n    this.element.appendChild(p);\n    p = this.textPathElement = DOM.createElement(\"textpath\");\n    p.on = true;\n    p.style['v-text-align'] = 'left';\n    this.element.appendChild(p);\n    this.draw.apply(this, arguments);\n  },\n  draw: function (text, font, alignment, path) {\n    var element = this.element,\n        textPath = this.textPathElement,\n        style = textPath.style;\n    textPath.string = text;\n\n    if (font) {\n      if (typeof font == 'string') {\n        style.font = font;\n      } else {\n        for (var key in font) {\n          var ckey = key.camelCase ? key.camelCase() : key;\n          if (ckey == 'fontFamily') style[ckey] = \"'\" + font[key] + \"'\"; // NOT UNIVERSALLY SUPPORTED OPTIONS\n          // else if (ckey == 'kerning') style['v-text-kern'] = !!font[key];\n          // else if (ckey == 'rotateGlyphs') style['v-rotate-letters'] = !!font[key];\n          // else if (ckey == 'letterSpacing') style['v-text-spacing'] = Number(font[key]) + '';\n          else style[ckey] = font[key];\n        }\n      }\n    }\n\n    if (alignment) style['v-text-align'] = fontAnchors[alignment] || alignment;\n\n    if (path) {\n      this.currentPath = path = new Path(path);\n      this.element.path = path.toVML();\n    } else if (!this.currentPath) {\n      var i = -1,\n          offsetRows = '\\n';\n\n      while ((i = text.indexOf('\\n', i + 1)) > -1) offsetRows += '\\n';\n\n      textPath.string = offsetRows + textPath.string;\n      this.element.path = 'm0,0l1,0';\n    } // Measuring the bounding box is currently necessary for gradients etc.\n    // Clone element because the element is dead once it has been in the DOM\n\n\n    element = element.cloneNode(true);\n    style = element.style; // Reset coordinates while measuring\n\n    element.coordorigin = '0,0';\n    element.coordsize = '10000,10000';\n    style.left = '0px';\n    style.top = '0px';\n    style.width = '10000px';\n    style.height = '10000px';\n    style.rotation = 0;\n    element.removeChild(element.firstChild); // Remove skew\n    // Inject the clone into the document\n\n    var canvas = new Surface(1, 1),\n        group = new Group(),\n        // Wrapping it in a group seems to alleviate some client rect weirdness\n    body = element.ownerDocument.body;\n    canvas.inject(body);\n    group.element.appendChild(element);\n    group.inject(canvas);\n    var ebb = element.getBoundingClientRect(),\n        cbb = canvas.toElement().getBoundingClientRect();\n    canvas.eject();\n    this.left = ebb.left - cbb.left;\n    this.top = ebb.top - cbb.top;\n    this.width = ebb.right - ebb.left;\n    this.height = ebb.bottom - ebb.top;\n    this.right = ebb.right - cbb.left;\n    this.bottom = ebb.bottom - cbb.top;\n\n    this._transform(); //this._size = { left: this.left, top: this.top, width: this.width, height: this.height};\n\n\n    return this;\n  }\n});","map":{"version":3,"sources":["/Users/quickmac/Desktop/node_projects/react-native-web-workout/node_modules/art/modes/vml/text.js"],"names":["Class","require","Base","Path","Surface","Group","DOM","fontAnchors","start","middle","end","module","exports","base_initialize","prototype","initialize","text","font","alignment","path","p","pathElement","createElement","textpathok","element","appendChild","textPathElement","on","style","draw","apply","arguments","textPath","string","key","ckey","camelCase","currentPath","toVML","i","offsetRows","indexOf","cloneNode","coordorigin","coordsize","left","top","width","height","rotation","removeChild","firstChild","canvas","group","body","ownerDocument","inject","ebb","getBoundingClientRect","cbb","toElement","eject","right","bottom","_transform"],"mappings":"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","sourcesContent":["var Class = require('../../core/class');\nvar Base = require('./base');\nvar Path = require('./path');\nvar Surface = require('./surface');\nvar Group = require('./group');\nvar DOM = require('./dom');\n\nvar fontAnchors = { start: 'left', middle: 'center', end: 'right' };\n\nmodule.exports = Class(Base, {\n\n\tbase_initialize: Base.prototype.initialize,\n\n\tinitialize: function(text, font, alignment, path){\n\t\tthis.base_initialize('shape');\n\t\t\n\t\tvar p = this.pathElement = DOM.createElement('path');\n\t\tp.textpathok = true;\n\t\tthis.element.appendChild(p);\n\t\t\n\t\tp = this.textPathElement = DOM.createElement(\"textpath\");\n\t\tp.on = true;\n\t\tp.style['v-text-align'] = 'left';\n\t\tthis.element.appendChild(p);\n\t\t\n\t\tthis.draw.apply(this, arguments);\n\t},\n\t\n\tdraw: function(text, font, alignment, path){\n\t\tvar element = this.element,\n\t\t    textPath = this.textPathElement,\n\t\t    style = textPath.style;\n\t\t\n\t\ttextPath.string = text;\n\t\t\n\t\tif (font){\n\t\t\tif (typeof font == 'string'){\n\t\t\t\tstyle.font = font;\n\t\t\t} else {\n\t\t\t\tfor (var key in font){\n\t\t\t\t\tvar ckey = key.camelCase ? key.camelCase() : key;\n\t\t\t\t\tif (ckey == 'fontFamily') style[ckey] = \"'\" + font[key] + \"'\";\n\t\t\t\t\t// NOT UNIVERSALLY SUPPORTED OPTIONS\n\t\t\t\t\t// else if (ckey == 'kerning') style['v-text-kern'] = !!font[key];\n\t\t\t\t\t// else if (ckey == 'rotateGlyphs') style['v-rotate-letters'] = !!font[key];\n\t\t\t\t\t// else if (ckey == 'letterSpacing') style['v-text-spacing'] = Number(font[key]) + '';\n\t\t\t\t\telse style[ckey] = font[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (alignment) style['v-text-align'] = fontAnchors[alignment] || alignment;\n\t\t\n\t\tif (path){\n\t\t\tthis.currentPath = path = new Path(path);\n\t\t\tthis.element.path = path.toVML();\n\t\t} else if (!this.currentPath){\n\t\t\tvar i = -1, offsetRows = '\\n';\n\t\t\twhile ((i = text.indexOf('\\n', i + 1)) > -1) offsetRows += '\\n';\n\t\t\ttextPath.string = offsetRows + textPath.string;\n\t\t\tthis.element.path = 'm0,0l1,0';\n\t\t}\n\t\t\n\t\t// Measuring the bounding box is currently necessary for gradients etc.\n\t\t\n\t\t// Clone element because the element is dead once it has been in the DOM\n\t\telement = element.cloneNode(true);\n\t\tstyle = element.style;\n\t\t\n\t\t// Reset coordinates while measuring\n\t\telement.coordorigin = '0,0';\n\t\telement.coordsize = '10000,10000';\n\t\tstyle.left = '0px';\n\t\tstyle.top = '0px';\n\t\tstyle.width = '10000px';\n\t\tstyle.height = '10000px';\n\t\tstyle.rotation = 0;\n\t\telement.removeChild(element.firstChild); // Remove skew\n\t\t\n\t\t// Inject the clone into the document\n\t\t\n\t\tvar canvas = new Surface(1, 1),\n\t\t    group = new Group(), // Wrapping it in a group seems to alleviate some client rect weirdness\n\t\t    body = element.ownerDocument.body;\n\t\t\n\t\tcanvas.inject(body);\n\t\tgroup.element.appendChild(element);\n\t\tgroup.inject(canvas);\n\t\t\n\t\tvar ebb = element.getBoundingClientRect(),\n\t\t    cbb = canvas.toElement().getBoundingClientRect();\n\t\t\n\t\tcanvas.eject();\n\t\t\n\t\tthis.left = ebb.left - cbb.left;\n\t\tthis.top = ebb.top - cbb.top;\n\t\tthis.width = ebb.right - ebb.left;\n\t\tthis.height = ebb.bottom - ebb.top;\n\t\tthis.right = ebb.right - cbb.left;\n\t\tthis.bottom = ebb.bottom - cbb.top;\n\t\t\n\t\tthis._transform();\n\n\t\t//this._size = { left: this.left, top: this.top, width: this.width, height: this.height};\n\t\treturn this;\n\t}\n\n});\n"]},"metadata":{},"sourceType":"script"}